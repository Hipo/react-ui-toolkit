"use strict";var e=require("./_tslib-1ad748a0.js"),t=require("react"),n=require("classnames"),a=require("./TypeaheadInput.js"),r=require("./numberUtils-321e0d24.js"),s=require("./Spinner.js"),o=require("./keyboardEventConstants-62db4190.js"),i=require("./Select.js"),l=require("./ListItem.js"),c=require("./List.js");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(this,arguments)}var d=({styles:e={},...n})=>t.createElement("svg",u({width:"10",height:"5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),t.createElement("path",{d:"M5 5l5-5H0l5 5z",fill:"#222"}));function p(e){return{id:e.id,content:e.title,context:e}}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m.apply(this,arguments)}var g=({styles:e={},...n})=>t.createElement("svg",m({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),t.createElement("path",{d:"M4 12l8-8M12 12L4 4",stroke:"#C7C7C7",strokeWidth:"1.5"}));function h(e){var a=e.testid,r=e.tag,s=e.onRemove,i=e.customClassName,l=n("tag",i,{"tag--is-removable":s});return t.createElement("div",{role:"button",tabIndex:0,"data-testid":a,onKeyDown:function(e){switch(e.stopPropagation(),e.key){case o.KEYBOARD_EVENT_KEY.ENTER:case o.KEYBOARD_EVENT_KEY.BACKSPACE:s&&s(r)}},className:l,onClick:function(e){e.stopPropagation(),s&&s(r)}},t.createElement("div",{className:"tag__body"},r.content),s&&t.createElement(g,{className:"tag__close-icon","aria-hidden":!0}))}function f(e){var a=e.handleTagRemove,r=e.tags,s=e.customClassName,o=e.input;return t.createElement(i.Trigger,{customClassName:"typeahead-select-trigger"},t.createElement(c,{customClassName:n("typeahead-select-trigger__tag-list",s),testid:"TypeaheadSelectTrigger.list",items:r},(function(e){return t.createElement(l,{key:e.id,customClassName:"typeahead-select-trigger__tag-list__item"},t.createElement(h,{onRemove:a,customClassName:"typeahead-select-trigger__tag-list__item__tag",tag:e}))})),o)}exports.TypeaheadSelect=function(r){var l=r.testid,c=r.options,u=r.selectedOptions,m=r.typeaheadProps,g=r.onTagRemove,h=r.onKeywordChange,y=r.onSelect,v=r.customClassName,E=r.selectedOptionLimit,_=r.shouldDisplaySelectedOptions,w=void 0===_||_,C=r.shouldFilterOptionsByKeyword,N=void 0===C||C,b=r.isDisabled,O=r.shouldShowEmptyOptions,S=void 0===O||O,T=r.canOpenDropdownMenu,j=void 0===T||T,K=r.areOptionsFetching,x=r.customSpinner,q=r.initialKeyword,A=void 0===q?"":q,B=r.controlledKeyword,D=t.useRef(null),R=e.__read(t.useState(!1),2),k=R[0],P=R[1],L=e.__read(t.useState(c),2),F=L[0],I=L[1],Y=e.__read(t.useState(!1),2),M=Y[0],V=Y[1],z=e.__read(t.useState(A),2),H=z[0],Q=z[1],U="string"==typeof B?B:H,W=function(e){return e.map(p)}(u),G=Boolean(E&&u.length>=E),J=!E||E>1,X=!J||Boolean(E&&u.length>=E-1),Z=n("typeahead-select",v,{"typeahead-select--has-selected-options":Boolean(u.length),"typeahead-select--can-select-multiple":J,"typeahead-select--is-dropdown-menu-open":k}),$=x||t.createElement(s,{customClassName:"typeahead-select__spinner"});return t.useEffect((function(){I(c)}),[c]),t.useEffect((function(){var e;return M&&(e=setTimeout((function(){D.current&&(D.current.focus(),V(!1))}))),function(){clearTimeout(e)}}),[M]),t.useEffect((function(){var e,t,n;I((e=c,t="id",n=u.map((function(e){return e[t]})),e.reduce((function(e,a){return n.includes(a[t])||e.push(a),e}),[])))}),[c,u]),t.createElement(i,{role:"listbox",onSelect:function(e){G||b||(y(e),I(c),Q(""),V(!0))},options:F,customClassName:Z,value:u,isDisabled:b,shouldCloseOnSelect:X},t.createElement(f,{tags:w?W:[],handleTagRemove:function(e){g&&(g(e.context),V(!0))},input:!G&&t.createElement(a,{testid:"".concat(l,".search"),customClassName:"typeahead-select__input",id:m.id,name:m.name,type:m.type,placeholder:m.placeholder,value:U,onQueryChange:function(e){if(N){var t=c.filter((function(e){return u.indexOf(e)<0}));I(function(e,t){var n=e;return t&&(n=e.filter((function(e){return!e.title||e.title.toLowerCase().includes(t.toLowerCase())}))),n}(t,e))}h&&h(e);void 0===B&&Q(e)},onKeyDown:function(e){e.key===o.KEYBOARD_EVENT_KEY.BACKSPACE&&!U&&g&&u.length&&(e.stopPropagation(),g(u[u.length-1]))},rightIcon:K?$:t.createElement(d,{"aria-hidden":!0}),onFocus:function(e){j&&!b&&P(!0);m.onFocus&&m.onFocus(e)},isDisabled:b})}),t.createElement(i.Content,null,F.map((function(e){return t.createElement(i.Item,{key:e.id,option:e},e.title)})),S&&!F.length&&t.createElement("p",{"data-testid":"".concat(l,".empty-message"),className:"dropdown-list__empty-message"},"No available options")))},exports.limitArrayLengthFromTheEnd=function(e,t){var n=t;return r.isNonNegativeNumber(e)&&t.length>e&&(n=t.slice(t.length-e)),n},exports.updateAtIndex=function(t,n,a){var r=e.__spreadArray([],e.__read(t),!1);return r.splice(n,1,a),r};
