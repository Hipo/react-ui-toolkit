"use strict";var e=require("./_tslib-774feabd.js"),r=require("react"),t=require("./Input.js"),a=require("./numberUtils-fd257258.js");function o(){try{return e="undefined"!=typeof navigator?navigator.userAgent||navigator.vendor:"",![/Android/i,/iPhone/i,/iPad/i].some((function(r){return e.match(r)}))&&a.isIntlAPISupported()}catch(e){return!1}var e}function i(r){return o()?e.__assign(e.__assign(e.__assign({},r),a.getNumberSeparators(r.locale)),a.getNegativeZero(r.locale)):{locale:void 0,shouldFormatToLocaleString:!1,DECIMAL_NUMBER_SEPARATOR:void 0,MINUS_SIGN:void 0,LOCALE_NEGATIVE_ZERO:void 0}}function n(e){var r,t=e.value,o=e.event,n=e.formatProps,u=e.parseNumberOptions,s=e.maximumFractionDigits,l=i(n),c=l.locale,m=l.shouldFormatToLocaleString,g=o.currentTarget.value,v=a.parseNumber(u,g),d=v?String(v):"",p=!function(e){var r=e.eventValue,t=e.formattedValue;return""===t||"-"!==r&&Number.isNaN(Number(t))}({eventValue:g,formattedValue:v});if(p&&(null===(r=v.match(/./))||void 0===r?void 0:r.length)?d=String(v):p||(d=t),p&&(m||s>0||d.includes("-"))&&(d=a.removeLeadingZeros(c,d)),0===s&&"-0"===d&&(d="0"),m){var f=a.getThousandthSeparatorCount(d),S=a.getThousandthSeparatorCount(t),_=o.currentTarget,h=o.currentTarget.selectionStart||0;!d||String(t).length!==d.length+1&&String(t).length!==d.length-1||(S===f+1?h-=1:S===f-1&&(h+=1),window.requestAnimationFrame((function(){_.selectionStart=h,_.selectionEnd=h})))}return d}require("classnames");var u=r.forwardRef((function(u,s){var l=u.formatProps,c=void 0===l?{}:l,m=u.maximumFractionDigits,g=void 0===m?0:m,v=u.value,d=u.onChange;u.inputMode;var p=e.__rest(u,["formatProps","maximumFractionDigits","value","onChange","inputMode"]);if(!function(e){var r=e.maximumFractionDigits;return Number.isInteger(r)&&r>=0}({maximumFractionDigits:g}))throw new Error("maximumFractionDigits should be zero or a positive integer.");var f,S=i(c),_=S.locale,h=S.shouldFormatToLocaleString,F=S.DECIMAL_NUMBER_SEPARATOR,L=S.MINUS_SIGN,N=S.LOCALE_NEGATIVE_ZERO,T=(f={locale:_,maximumFractionDigits:g},o()?f:e.__assign(e.__assign({},f),{locale:"en-US"})),E=function(r){var t,o=r.value,i=r.formatProps,n=r.signProps,u=r.maximumFractionDigits,s=i.locale,l=i.shouldFormatToLocaleString,c=n.decimalSeparatorForLocale,m=n.minusSignForLocale,g=n.negativeZeroForLocale,v=o;if("string"==typeof o&&l){var d=e.__read(String(o).split("."),2),p=d[0],f=d[1],S=a.formatNumber({maximumFractionDigits:u,locale:s});(null===(t=o.match(/\.$/))||void 0===t?void 0:t.length)||f?v="".concat(S(parseInt(p))).concat(c).concat(a.mapDigitsToLocalVersion({locale:s},f)):p&&(v=p!==m&&p!==g?S(parseInt(p)):"".concat(m).concat(a.mapDigitsToLocalVersion({locale:s},p)))}return v}({value:v,formatProps:{locale:_,shouldFormatToLocaleString:h},signProps:{decimalSeparatorForLocale:F,minusSignForLocale:L,negativeZeroForLocale:N},maximumFractionDigits:g});return r.createElement(t,e.__assign({ref:s,type:"text",onChange:function(e){e.currentTarget.value&&(e.currentTarget.value=n({value:v,event:e,formatProps:c,parseNumberOptions:T,maximumFractionDigits:g}));d(e)},value:E},p))}));module.exports=u;
