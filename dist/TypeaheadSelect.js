"use strict";var e=require("./_tslib-774feabd.js"),t=require("react"),n=require("classnames"),a=require("./TypeaheadInput.js"),s=require("./arrayUtils-774e767a.js"),r=require("./Spinner.js"),o=require("./keyboardEventConstants-a3d7fb76.js"),i=require("./Select.js"),l=require("./ListItem.js"),c=require("./List.js");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(this,arguments)}require("./Input.js"),require("./useDebounce-80ae39fa.js"),require("./numberUtils-fd257258.js"),require("./check-ee1d93d1.js"),require("./Button.js"),require("uuid");var d=({styles:e={},...n})=>t.createElement("svg",u({width:"10",height:"5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),t.createElement("path",{d:"M5 5l5-5H0l5 5z",fill:"#222"}));function m(e){return{id:e.id,content:e.title,context:e}}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p.apply(this,arguments)}var g=({styles:e={},...n})=>t.createElement("svg",p({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),t.createElement("path",{d:"M4 12l8-8M12 12L4 4",stroke:"#C7C7C7",strokeWidth:"1.5"}));function h(e){var a=e.testid,s=e.tag,r=e.onRemove,i=e.customClassName,l=n("tag",i,{"tag--is-removable":r});return t.createElement("div",{role:"button",tabIndex:0,"data-testid":a,onKeyDown:function(e){switch(e.stopPropagation(),e.key){case o.KEYBOARD_EVENT_KEY.ENTER:case o.KEYBOARD_EVENT_KEY.BACKSPACE:r&&r(s)}},className:l,onClick:function(e){e.stopPropagation(),r&&r(s)}},t.createElement("div",{className:"tag__body"},s.content),r&&t.createElement(g,{className:"tag__close-icon","aria-hidden":!0}))}function f(e){var a=e.handleTagRemove,s=e.tags,r=e.customClassName,o=e.input;return t.createElement(i.Trigger,{customClassName:"typeahead-select-trigger"},t.createElement(c,{customClassName:n("typeahead-select-trigger__tag-list",r),testid:"TypeaheadSelectTrigger.list",items:s},(function(e){return t.createElement(l,{key:e.id,customClassName:"typeahead-select-trigger__tag-list__item"},t.createElement(h,{onRemove:a,customClassName:"typeahead-select-trigger__tag-list__item__tag",tag:e}))})),o)}module.exports=function(l){var c=l.testid,u=l.options,p=l.selectedOptions,g=l.typeaheadProps,h=l.onTagRemove,y=l.onKeywordChange,E=l.onSelect,v=l.customClassName,_=l.selectedOptionLimit,w=l.shouldDisplaySelectedOptions,C=void 0===w||w,b=l.shouldFilterOptionsByKeyword,O=void 0===b||b,j=l.isDisabled,N=l.shouldShowEmptyOptions,q=void 0===N||N,K=l.canOpenDropdownMenu,S=void 0===K||K,T=l.areOptionsFetching,B=l.customSpinner,D=l.initialKeyword,R=void 0===D?"":D,k=l.controlledKeyword,x=t.useRef(null),P=e.__read(t.useState(!1),2),A=P[0],I=P[1],L=e.__read(t.useState(u),2),Y=L[0],F=L[1],M=e.__read(t.useState(!1),2),V=M[0],U=M[1],z=e.__read(t.useState(R),2),H=z[0],Q=z[1],W="string"==typeof k?k:H,G=function(e){return e.map(m)}(p),J=Boolean(_&&p.length>=_),X=!_||_>1,Z=!X||Boolean(_&&p.length>=_-1),$=n("typeahead-select",v,{"typeahead-select--has-selected-options":Boolean(p.length),"typeahead-select--can-select-multiple":X,"typeahead-select--is-dropdown-menu-open":A}),ee=B||t.createElement(r,{customClassName:"typeahead-select__spinner"});return t.useEffect((function(){F(u)}),[u]),t.useEffect((function(){var e;return V&&(e=setTimeout((function(){x.current&&(x.current.focus(),U(!1))}))),function(){clearTimeout(e)}}),[V]),t.useEffect((function(){F(s.filterOutItemsByKey(u,"id",p))}),[u,p]),t.createElement(i,{role:"listbox",onSelect:function(e){J||j||(E(e),F(u),Q(""),U(!0))},options:Y,customClassName:$,value:p,isDisabled:j,shouldCloseOnSelect:Z},t.createElement(f,{tags:C?G:[],handleTagRemove:function(e){h&&(h(e.context),U(!0))},input:!J&&t.createElement(a,{testid:"".concat(c,".search"),customClassName:"typeahead-select__input",id:g.id,name:g.name,type:g.type,placeholder:g.placeholder,value:W,onQueryChange:function(e){if(O){var t=u.filter((function(e){return p.indexOf(e)<0}));F(function(e,t){var n=e;return t&&(n=e.filter((function(e){return!e.title||e.title.toLowerCase().includes(t.toLowerCase())}))),n}(t,e))}y&&y(e);void 0===k&&Q(e)},onKeyDown:function(e){e.key===o.KEYBOARD_EVENT_KEY.BACKSPACE&&!W&&h&&p.length&&(e.stopPropagation(),h(p[p.length-1]))},rightIcon:T?ee:t.createElement(d,{"aria-hidden":!0}),onFocus:function(e){S&&!j&&I(!0);g.onFocus&&g.onFocus(e)},isDisabled:j})}),t.createElement(i.Content,null,Y.map((function(e){return t.createElement(i.Item,{key:e.id,option:e},e.title)})),q&&!Y.length&&t.createElement("p",{"data-testid":"".concat(c,".empty-message"),className:"dropdown-list__empty-message"},"No available options")))};
